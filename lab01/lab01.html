<HTML>
<BODY>
<canvas id = 'lab01' height = '500' width = '500'> </canvas>
<script>
	var canvas = document.getElementById("lab01");
	var ctx = canvas.getContext("2d");

	ctx.fillStyle = "#aaaa00";
	ctx.fillRect (200, 200, 50, 50);

	canvas.addEventListener('click', function (event){
		var x = event.clientX;
		var y = event.clientY;
		var xpos = x;
		var ypos = y;
		ctx.fillStyle = "#aa00aa";
		var timer = setInterval(function(){			
			if (x - xpos < 20)
				x += 1;
			else if (y - ypos < 20){
				xpos = x - 40;
				y += 1;
			}
			else if (x - xpos > 20){
				ypos = y - 40;
				x -= 1;
			}
			else if (y - ypos > 20)
				y -= 1;
			ctx.fillRect(x, y, 5, 5);
		}, 20)
	});

	var link = document.createElement("a");
	link.innerHTML = 'save image';
	link.addEventListener('click',function (event) {
		link.href = canvas.toDataURL();
		link.download = "canvas.png";
	}, false)
	document.body.appendChild(link);
</script>
</BODY>
</HTML>