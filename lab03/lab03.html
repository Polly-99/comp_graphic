//зажать кнопку мыши - начало линии, отпустить - конец

<HTLM>
<BODY style = "margin: 0">
<canvas id = 'lab03_1', width = '500', height = '500'> </canvas>
<script>
  
var canvas = document.getElementById("lab03_1");
var ctx = canvas.getContext("2d");

var y1 = 0, x1 = 0, x2 = 0, y2 = 0;

canvas.addEventListener('mousedown', function (event){
	x1 = event.clientX;
	y1 = event.clientY;
})

canvas.addEventListener('mouseup', function (event){
	x2 = event.clientX;
	y2 = event.clientY;
	var a = Math.abs(x2 - x1);
	var b = Math.abs(y2 - y1);
	var error = 0, y = y1, x = x1, c = 1, d = 1;
	if (y1 > y2)
		c = -1;
	if (x1 > x2)
		d = -1;
	while (x != x2){
		if (error > a){
			y = y + c;
			error = error + 2 * b - 2 * a;
		}
		else
			error = error + 2 * b;
		ctx.fillRect (x, y, 1, 1);
		x = x + d;
	}
})

var link = document.createElement("a");
	link.innerHTML = 'save image';
	link.addEventListener('click',function (event) {
		link.href = canvas.toDataURL();
		link.download = "lines.png";
	}, false)
document.body.appendChild(link);

</script>
</BODY>
</HTML>